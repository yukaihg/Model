
var connection = new Connection("10.0.1.3", 9200);
//connection.describe(function(obj){
//	console.log("Server information:");
//	console.log(obj);
//})

//connection.exists("/", function(exists){
//	if (exists)
//		console.log("Exists!");
//	else
//		console.log("Does not exist!");
//});

//connection.index("honline").mapping("users").documents("izaakschroeder", "justinkolberg").properties("email", "password").get(function(){
//	
//});

//filter: boolean yes/no does no scoring; query: does scoring

//connection.index("honline").mapping("users").document("izaakschroeder").set({
//	name: "Izaak Schroeder",
//	email: "izaak.schroeder@gmail.com"
//});

var geocoder = require('./geocode');

/*
geocoder.get("6155 131 Street, Surrey, BC, Canada", function(geo) {
	connection.index("yourultimatematch.com").mapping("user").document("izaakschroeder").set({
		name: "Izaak Schroeder",
		age: 23,
		email: "izaak.schroeder@gmail.com",
		location: geo
	})
})*/

//connection.index("yourultimatematch.com").mapping("user").delete();

/*
connection.index("yourultimatematch.com").mapping("user").materialize({
	location: {
		type: "geo_point",
		store: "yes"
	}
})
*/

connection.index("yourultimatematch.com").find({
	explain: true,
	query: {
		 filtered : {
			query : {
				match_all : {}
			},
			filter : {
				geo_distance : {
					distance_unit: "km"
					distance : 200,
					"user.location" : {
						lat : -123.859161,
						lon : 50.114161
					}
				}
			}
		}
	}
}, function(out) {
	console.log(require('util').inspect(out, false, null));
})